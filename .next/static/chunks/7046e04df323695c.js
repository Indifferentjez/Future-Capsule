(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={callServer:function(){return s.callServer},createServerReference:function(){return o.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}};for(var i in r)Object.defineProperty(n,i,{enumerable:!0,get:r[i]});let s=e.r(32120),a=e.r(92245),o=e.r(35326)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),n=e.i(71645),r=e.i(31178),i=e.i(47414),s=e.i(21476),a=n,o=e.i(37806);class l extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:e,isPresent:n}){let r=(0,a.useId)(),i=(0,a.useRef)(null),s=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,a.useContext)(o.MotionConfigContext);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:o}=s.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=r;let l=document.createElement("style");return c&&(l.nonce=c),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[n]),(0,t.jsx)(l,{isPresent:n,childRef:i,sizeRef:s,children:a.cloneElement(e,{ref:i})})}let u=({children:e,initial:r,isPresent:a,onExitComplete:o,custom:l,presenceAffectsLayout:u,mode:p})=>{let m=(0,i.useConstant)(d),f=(0,n.useId)(),h=(0,n.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;o&&o()},[m,o]),x=(0,n.useMemo)(()=>({id:f,initial:r,isPresent:a,custom:l,onExitComplete:h,register:e=>(m.set(e,!1),()=>m.delete(e))}),u?[Math.random(),h]:[a,h]);return(0,n.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[a]),n.useEffect(()=>{a||m.size||!o||o()},[a]),"popLayout"===p&&(e=(0,t.jsx)(c,{isPresent:a,children:e})),(0,t.jsx)(s.PresenceContext.Provider,{value:x,children:e})};function d(){return new Map}var p=e.i(64978);let m=e=>e.key||"";function f(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var h=e.i(74008);let x=({children:e,custom:s,initial:a=!0,onExitComplete:o,presenceAffectsLayout:l=!0,mode:c="sync",propagate:d=!1})=>{let[x,y]=(0,p.usePresence)(d),v=(0,n.useMemo)(()=>f(e),[e]),g=d&&!x?[]:v.map(m),b=(0,n.useRef)(!0),j=(0,n.useRef)(v),w=(0,i.useConstant)(()=>new Map),[C,N]=(0,n.useState)(v),[P,R]=(0,n.useState)(v);(0,h.useIsomorphicLayoutEffect)(()=>{b.current=!1,j.current=v;for(let e=0;e<P.length;e++){let t=m(P[e]);g.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[P,g.length,g.join("-")]);let E=[];if(v!==C){let e=[...v];for(let t=0;t<P.length;t++){let n=P[t],r=m(n);g.includes(r)||(e.splice(t,0,n),E.push(n))}"wait"===c&&E.length&&(e=E),R(f(e)),N(v);return}let{forceRender:S}=(0,n.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:P.map(e=>{let n=m(e),r=(!d||!!x)&&(v===P||g.includes(n));return(0,t.jsx)(u,{isPresent:r,initial:(!b.current||!!a)&&void 0,custom:r?void 0:s,presenceAffectsLayout:l,mode:c,onExitComplete:r?void 0:()=>{if(!w.has(n))return;w.set(n,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),R(j.current),d&&(null==y||y()),o&&o())},children:e},n)})})};e.s(["AnimatePresence",()=>x],88653)},31977,e=>{"use strict";var t=e.i(43476),n=e.i(71645),r=e.i(46932),i=e.i(88653),s=e.i(95187);let a=(0,s.createServerReference)("40aaf08d577b19564a27451c5a2629a9c0948819fe",s.callServer,void 0,s.findSourceMapURL,"markOpened");var o=e.i(67881);function l({onOpen:e}){return(0,t.jsx)(r.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",initial:{opacity:1},exit:{opacity:0},transition:{duration:.8},children:(0,t.jsxs)(r.motion.div,{className:"max-w-md mx-auto p-8 text-center space-y-6",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[(0,t.jsx)("h1",{className:"text-2xl font-medium text-foreground",children:"A message from your past self has arrived."}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"When you’re ready, open it below."}),(0,t.jsx)(o.Button,{size:"lg",className:"rounded-full px-8",onClick:e,children:"Open"})]})},"overlay")}function c({content:e}){return(0,t.jsx)(r.motion.article,{className:"opening-ceremony-card relative rounded-lg shadow-xl p-8 md:p-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{fontFamily:"Georgia, 'Times New Roman', serif",boxShadow:"0 4px 20px rgba(0,0,0,0.1), inset 0 0 60px rgba(139,90,43,0.05)"},children:(0,t.jsx)("div",{className:"prose max-w-none",children:(0,t.jsx)("p",{className:"opening-ceremony-ink text-lg leading-relaxed whitespace-pre-wrap",children:e})})})}function u({src:e}){let i=(0,n.useRef)(null),[s,a]=(0,n.useState)(!1);return(0,t.jsxs)(r.motion.div,{className:"flex flex-col items-center justify-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,t.jsx)("audio",{ref:i,src:e,onEnded:()=>a(!1)}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e=i.current;e&&(s?e.pause():e.play(),a(!s))},className:"opening-ceremony-wax-button relative w-24 h-24 rounded-full border-4 shadow-lg flex items-center justify-center hover:scale-105 transition-transform focus:outline-none focus:ring-2 focus:ring-[var(--antique-brass)]","aria-label":s?"Pause":"Play",children:s?(0,t.jsxs)("span",{className:"flex gap-0.5",children:[(0,t.jsx)("span",{className:"w-2 h-6 rounded-sm",style:{backgroundColor:"var(--antique-ink)"}}),(0,t.jsx)("span",{className:"w-2 h-6 rounded-sm",style:{backgroundColor:"var(--antique-ink)"}})]}):(0,t.jsx)("span",{className:"w-0 h-0 border-y-[12px] border-y-transparent border-l-[20px] border-l-[var(--antique-ink)] ml-1"})}),(0,t.jsx)("p",{className:"opening-ceremony-ink-secondary mt-4 font-medium",children:s?"Playing…":"Play message"})]})}function d({message:e,signedMediaUrl:s}){let[o,d]=(0,n.useState)("overlay"),[p,m]=(0,n.useState)(!1),f=(0,n.useCallback)(()=>{d("reveal"),setTimeout(()=>{d("content"),p||(m(!0),a(e.id))},1800)},[e.id,p]);return(0,t.jsx)("div",{className:"min-h-screen relative overflow-hidden",children:(0,t.jsxs)(i.AnimatePresence,{mode:"wait",children:["overlay"===o&&(0,t.jsx)(l,{onOpen:f}),("reveal"===o||"content"===o)&&(0,t.jsxs)(r.motion.div,{"data-open-theme":"antique",className:"absolute inset-0 opening-ceremony-bg opening-ceremony-vignette",initial:{opacity:0},animate:{opacity:1},transition:{duration:"reveal"===o?1:.6},children:["reveal"===o&&(0,t.jsx)(r.motion.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8}}),"content"===o&&(0,t.jsx)(r.motion.div,{className:"min-h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto py-12 px-6",children:["text"===e.type&&e.text_content&&(0,t.jsx)(c,{content:e.text_content}),"audio"===e.type&&s&&(0,t.jsx)(u,{src:s}),"video"===e.type&&s&&(0,t.jsxs)("div",{className:"relative rounded-lg overflow-hidden border-4 border-amber-900/40 shadow-xl",children:[(0,t.jsx)("video",{src:s,controls:!0,className:"w-full aspect-video object-cover",style:{filter:"sepia(0.2) contrast(1.05)"}}),(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-[url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noise%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noise)%22 opacity=%220.06%22/%3E%3C/svg%3E')] mix-blend-overlay"})]}),e.song_url&&(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsx)("a",{href:e.song_url,target:"_blank",rel:"noopener noreferrer",className:"opening-ceremony-accent inline-flex items-center rounded-lg border-2 px-4 py-2 no-underline hover:opacity-90",children:e.song_title&&e.song_artist?`Play “${e.song_title}” by ${e.song_artist}`:"Play on Spotify / Apple Music"})})]})},"content")]},"antique-scope")]})})}e.s(["OpenCeremony",()=>d],31977)}]);