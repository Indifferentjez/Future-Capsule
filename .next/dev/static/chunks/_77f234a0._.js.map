{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/lib/store/composeStore.ts"],"sourcesContent":["import { create } from \"zustand\";\r\nimport type { ComposeDraft } from \"@/types/database\";\r\n\r\ninterface ComposeState extends ComposeDraft {\r\n  setDraft: (draft: Partial<ComposeDraft>) => void;\r\n  reset: () => void;\r\n}\r\n\r\nconst initialState: ComposeDraft = {\r\n  preset: undefined,\r\n  deliverMode: undefined,\r\n  deliverAt: undefined,\r\n  birthdayDay: undefined,\r\n  birthdayMonth: undefined,\r\n  timezone: undefined,\r\n  messageType: undefined,\r\n  guidedMode: true,\r\n  selectedPromptIds: [],\r\n  textContent: undefined,\r\n  mediaBlob: null,\r\n  mediaPath: null,\r\n  songTitle: null,\r\n  songArtist: null,\r\n  songUrl: null,\r\n  editMessageId: null,\r\n};\r\n\r\nexport const useComposeStore = create<ComposeState>((set) => ({\r\n  ...initialState,\r\n  setDraft: (draft) => set((state) => ({ ...state, ...draft })),\r\n  reset: () => set(initialState),\r\n}));\r\n"],"names":[],"mappings":";;;;AAAA;;AAQA,MAAM,eAA6B;IACjC,QAAQ;IACR,aAAa;IACb,WAAW;IACX,aAAa;IACb,eAAe;IACf,UAAU;IACV,aAAa;IACb,YAAY;IACZ,mBAAmB,EAAE;IACrB,aAAa;IACb,WAAW;IACX,WAAW;IACX,WAAW;IACX,YAAY;IACZ,SAAS;IACT,eAAe;AACjB;AAEO,MAAM,kBAAkB,IAAA,qJAAM,EAAe,CAAC,MAAQ,CAAC;QAC5D,GAAG,YAAY;QACf,UAAU,CAAC,QAAU,IAAI,CAAC,QAAU,CAAC;oBAAE,GAAG,KAAK;oBAAE,GAAG,KAAK;gBAAC,CAAC;QAC3D,OAAO,IAAM,IAAI;IACnB,CAAC"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/ui/label.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface LabelProps\r\n  extends React.LabelHTMLAttributes<HTMLLabelElement> {}\r\n\r\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\r\n  ({ className, ...props }, ref) => (\r\n    <label\r\n      ref={ref}\r\n      className={cn(\r\n        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n);\r\nLabel.displayName = \"Label\";\r\n\r\nexport { Label };\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAQA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAIf,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,qHAAE,EACX,kWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/ui/select.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface SelectProps\r\n  extends React.SelectHTMLAttributes<HTMLSelectElement> {}\r\n\r\nconst Select = React.forwardRef<HTMLSelectElement, SelectProps>(\r\n  ({ className, children, ...props }, ref) => (\r\n    <select\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-10 w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </select>\r\n  )\r\n);\r\nSelect.displayName = \"Select\";\r\n\r\nexport { Select };\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAQA,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAClC,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,gQACA;QAED,GAAG,KAAK;kBAER;;;;;;;AAIP,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepDelivery.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select } from \"@/components/ui/select\";\r\n\r\nconst MONTHS = [\r\n  \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\",\r\n];\r\n\r\nexport function StepDelivery({ onNext }: { onNext: () => void }) {\r\n  const deliverMode = useComposeStore((s) => s.deliverMode);\r\n  const deliverAt = useComposeStore((s) => s.deliverAt);\r\n  const birthdayDay = useComposeStore((s) => s.birthdayDay);\r\n  const birthdayMonth = useComposeStore((s) => s.birthdayMonth);\r\n  const timezone = useComposeStore((s) => s.timezone) ?? Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n\r\n  const handleMode = (mode: \"date\" | \"birthday\") => {\r\n    setDraft({ deliverMode: mode });\r\n    if (mode === \"date\" && !deliverAt) {\r\n      const d = new Date();\r\n      d.setFullYear(d.getFullYear() + 1);\r\n      setDraft({ deliverAt: d.toISOString().slice(0, 16) });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-2\">\r\n        <Label>Delivery mode</Label>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            type=\"button\"\r\n            variant={deliverMode === \"date\" ? \"default\" : \"outline\"}\r\n            onClick={() => handleMode(\"date\")}\r\n          >\r\n            Specific date\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant={deliverMode === \"birthday\" ? \"default\" : \"outline\"}\r\n            onClick={() => handleMode(\"birthday\")}\r\n          >\r\n            Birthday\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {deliverMode === \"date\" && (\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"deliverAt\">Delivery date & time</Label>\r\n          <Input\r\n            id=\"deliverAt\"\r\n            type=\"datetime-local\"\r\n            value={deliverAt ? deliverAt.slice(0, 16) : \"\"}\r\n            onChange={(e) => setDraft({ deliverAt: e.target.value ? new Date(e.target.value).toISOString() : undefined })}\r\n            min={new Date().toISOString().slice(0, 16)}\r\n          />\r\n        </div>\r\n      )}\r\n      {deliverMode === \"birthday\" && (\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"bday-month\">Month</Label>\r\n            <Select\r\n              id=\"bday-month\"\r\n              value={birthdayMonth ?? \"\"}\r\n              onChange={(e) => setDraft({ birthdayMonth: e.target.value ? Number(e.target.value) : undefined })}\r\n            >\r\n              <option value=\"\">Select</option>\r\n              {MONTHS.map((m, i) => (\r\n                <option key={m} value={i + 1}>{m}</option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"bday-day\">Day</Label>\r\n            <Input\r\n              id=\"bday-day\"\r\n              type=\"number\"\r\n              min={1}\r\n              max={31}\r\n              placeholder=\"1–31\"\r\n              value={birthdayDay ?? \"\"}\r\n              onChange={(e) => setDraft({ birthdayDay: e.target.value ? Number(e.target.value) : undefined })}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"timezone\">Timezone</Label>\r\n        <Input\r\n          id=\"timezone\"\r\n          value={timezone}\r\n          onChange={(e) => setDraft({ timezone: e.target.value })}\r\n          readOnly\r\n          className=\"bg-muted\"\r\n        />\r\n      </div>\r\n      <Button type=\"button\" onClick={onNext}>Next</Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepMessageType.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Type, Mic, Video } from \"lucide-react\";\r\nimport type { MessageType } from \"@/types/database\";\r\n\r\nexport function StepMessageType({ onNext }: { onNext: () => void }) {\r\n  const messageType = useComposeStore((s) => s.messageType);\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n\r\n  const types: { id: MessageType; label: string; icon: typeof Type }[] = [\r\n    { id: \"text\", label: \"Text\", icon: Type },\r\n    { id: \"audio\", label: \"Audio (max 2:00)\", icon: Mic },\r\n    { id: \"video\", label: \"Video (max 1:30)\", icon: Video },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <p className=\"text-sm text-muted-foreground\">How do you want to send your message?</p>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n        {types.map(({ id, label, icon: Icon }) => (\r\n          <Button\r\n            key={id}\r\n            type=\"button\"\r\n            variant={messageType === id ? \"default\" : \"outline\"}\r\n            className=\"h-auto flex flex-col gap-2 py-6\"\r\n            onClick={() => setDraft({ messageType: id })}\r\n          >\r\n            <Icon className=\"h-8 w-8\" />\r\n            <span>{label}</span>\r\n          </Button>\r\n        ))}\r\n      </div>\r\n      <Button type=\"button\" onClick={onNext} disabled={!messageType}>Next</Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;;;AAJA;;;;AAOO,SAAS,gBAAgB,EAAE,MAAM,EAA0B;;IAChE,MAAM,cAAc,IAAA,kJAAe;wDAAC,CAAC,IAAM,EAAE,WAAW;;IACxD,MAAM,WAAW,IAAA,kJAAe;qDAAC,CAAC,IAAM,EAAE,QAAQ;;IAElD,MAAM,QAAiE;QACrE;YAAE,IAAI;YAAQ,OAAO;YAAQ,MAAM,6MAAI;QAAC;QACxC;YAAE,IAAI;YAAS,OAAO;YAAoB,MAAM,0MAAG;QAAC;QACpD;YAAE,IAAI;YAAS,OAAO;YAAoB,MAAM,gNAAK;QAAC;KACvD;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;0BAAgC;;;;;;0BAC7C,6LAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,iBACnC,6LAAC,wIAAM;wBAEL,MAAK;wBACL,SAAS,gBAAgB,KAAK,YAAY;wBAC1C,WAAU;wBACV,SAAS,IAAM,SAAS;gCAAE,aAAa;4BAAG;;0CAE1C,6LAAC;gCAAK,WAAU;;;;;;0CAChB,6LAAC;0CAAM;;;;;;;uBAPF;;;;;;;;;;0BAWX,6LAAC,wIAAM;gBAAC,MAAK;gBAAS,SAAS;gBAAQ,UAAU,CAAC;0BAAa;;;;;;;;;;;;AAGrE;GA9BgB;;QACM,kJAAe;QAClB,kJAAe;;;KAFlB"}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/ui/switch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface SwitchProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  checked?: boolean;\r\n  onCheckedChange?: (checked: boolean) => void;\r\n}\r\n\r\nconst Switch = React.forwardRef<HTMLButtonElement, SwitchProps>(\r\n  ({ className, checked = false, onCheckedChange, ...props }, ref) => (\r\n    <button\r\n      type=\"button\"\r\n      role=\"switch\"\r\n      aria-checked={checked}\r\n      ref={ref}\r\n      className={cn(\r\n        \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\r\n        checked ? \"bg-foreground\" : \"bg-muted\",\r\n        className\r\n      )}\r\n      onClick={() => onCheckedChange?.(!checked)}\r\n      {...props}\r\n    >\r\n      <span\r\n        className={cn(\r\n          \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform\",\r\n          checked ? \"translate-x-5\" : \"translate-x-1\"\r\n        )}\r\n      />\r\n    </button>\r\n  )\r\n);\r\nSwitch.displayName = \"Switch\";\r\n\r\nexport { Switch };\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,UAAU,KAAK,EAAE,eAAe,EAAE,GAAG,OAAO,EAAE,oBAC1D,6LAAC;QACC,MAAK;QACL,MAAK;QACL,gBAAc;QACd,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,sTACA,UAAU,kBAAkB,YAC5B;QAEF,SAAS,IAAM,kBAAkB,CAAC;QACjC,GAAG,KAAK;kBAET,cAAA,6LAAC;YACC,WAAW,IAAA,qHAAE,EACX,sGACA,UAAU,kBAAkB;;;;;;;;;;;;AAMtC,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepGuidedToggle.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport function StepGuidedToggle({ onNext }: { onNext: () => void }) {\r\n  const guidedMode = useComposeStore((s) => s.guidedMode);\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between rounded-lg border border-border p-4\">\r\n        <div>\r\n          <Label htmlFor=\"guided\" className=\"text-base font-medium\">Guided mode</Label>\r\n          <p className=\"text-sm text-muted-foreground mt-1\">\r\n            Show prompts while recording so you know what to talk about.\r\n          </p>\r\n        </div>\r\n        <Switch\r\n          id=\"guided\"\r\n          checked={guidedMode ?? true}\r\n          onCheckedChange={(v) => setDraft({ guidedMode: v })}\r\n        />\r\n      </div>\r\n      <Button type=\"button\" onClick={onNext}>Next</Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS,iBAAiB,EAAE,MAAM,EAA0B;;IACjE,MAAM,aAAa,IAAA,kJAAe;wDAAC,CAAC,IAAM,EAAE,UAAU;;IACtD,MAAM,WAAW,IAAA,kJAAe;sDAAC,CAAC,IAAM,EAAE,QAAQ;;IAElD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC,sIAAK;gCAAC,SAAQ;gCAAS,WAAU;0CAAwB;;;;;;0CAC1D,6LAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;;kCAIpD,6LAAC,wIAAM;wBACL,IAAG;wBACH,SAAS,cAAc;wBACvB,iBAAiB,CAAC,IAAM,SAAS;gCAAE,YAAY;4BAAE;;;;;;;;;;;;0BAGrD,6LAAC,wIAAM;gBAAC,MAAK;gBAAS,SAAS;0BAAQ;;;;;;;;;;;;AAG7C;GAtBgB;;QACK,kJAAe;QACjB,kJAAe;;;KAFlB"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepPrompts.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport type { Prompt } from \"@/types/database\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst MIN_SELECT = 3;\r\nconst MAX_SELECT = 6;\r\n\r\nexport function StepPrompts({ onNext }: { onNext: () => void }) {\r\n  const guidedMode = useComposeStore((s) => s.guidedMode);\r\n  const selectedPromptIds = useComposeStore((s) => s.selectedPromptIds) ?? [];\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n  const [prompts, setPrompts] = useState<Prompt[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    supabase.from(\"prompts\").select(\"id, category, time_horizon, intensity, text\").then(({ data }) => {\r\n      setPrompts(data ?? []);\r\n      setLoading(false);\r\n    });\r\n  }, [supabase]);\r\n\r\n  const toggle = (id: string) => {\r\n    const next = selectedPromptIds.includes(id)\r\n      ? selectedPromptIds.filter((p) => p !== id)\r\n      : selectedPromptIds.length < MAX_SELECT\r\n        ? [...selectedPromptIds, id]\r\n        : selectedPromptIds;\r\n    setDraft({ selectedPromptIds: next });\r\n  };\r\n\r\n  if (!guidedMode) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <p className=\"text-muted-foreground\">Guided mode is off. Skip to your message.</p>\r\n        <Button type=\"button\" onClick={onNext}>Next</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) return <p className=\"text-muted-foreground\">Loading prompts…</p>;\r\n\r\n  const byCategory = prompts.reduce<Record<string, Prompt[]>>((acc, p) => {\r\n    (acc[p.category] = acc[p.category] ?? []).push(p);\r\n    return acc;\r\n  }, {});\r\n\r\n  const canNext = selectedPromptIds.length >= MIN_SELECT && selectedPromptIds.length <= MAX_SELECT;\r\n  const estMinutes = Math.ceil((selectedPromptIds.length * 15) / 60);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Pick 3–6 prompts. We’ll show them like a teleprompter while you record. (~{estMinutes} min total)\r\n      </p>\r\n      <div className=\"space-y-4\">\r\n        {Object.entries(byCategory).map(([category, list]) => (\r\n          <div key={category}>\r\n            <h4 className=\"text-sm font-medium text-foreground mb-2\">{category}</h4>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {list.map((p) => (\r\n                <button\r\n                  key={p.id}\r\n                  type=\"button\"\r\n                  onClick={() => toggle(p.id)}\r\n                  className={cn(\r\n                    \"rounded-md border px-3 py-2 text-left text-sm transition-colors\",\r\n                    selectedPromptIds.includes(p.id)\r\n                      ? \"border-foreground bg-foreground text-background\"\r\n                      : \"border-border hover:border-foreground/50\"\r\n                  )}\r\n                >\r\n                  {p.text}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Selected: {selectedPromptIds.length} / {MAX_SELECT}\r\n      </p>\r\n      <Button type=\"button\" onClick={onNext} disabled={!canNext}>\r\n        Next\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AAEA;;;AARA;;;;;;AAUA,MAAM,aAAa;AACnB,MAAM,aAAa;AAEZ,SAAS,YAAY,EAAE,MAAM,EAA0B;;IAC5D,MAAM,aAAa,IAAA,kJAAe;mDAAC,CAAC,IAAM,EAAE,UAAU;;IACtD,MAAM,oBAAoB,IAAA,kJAAe;uCAAC,CAAC,IAAM,EAAE,iBAAiB;yCAAK,EAAE;IAC3E,MAAM,WAAW,IAAA,kJAAe;iDAAC,CAAC,IAAM,EAAE,QAAQ;;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,WAAW,IAAA,4IAAY;IAE7B,IAAA,0KAAS;iCAAC;YACR,SAAS,IAAI,CAAC,WAAW,MAAM,CAAC,+CAA+C,IAAI;yCAAC,CAAC,EAAE,IAAI,EAAE;oBAC3F,WAAW,QAAQ,EAAE;oBACrB,WAAW;gBACb;;QACF;gCAAG;QAAC;KAAS;IAEb,MAAM,SAAS,CAAC;QACd,MAAM,OAAO,kBAAkB,QAAQ,CAAC,MACpC,kBAAkB,MAAM,CAAC,CAAC,IAAM,MAAM,MACtC,kBAAkB,MAAM,GAAG,aACzB;eAAI;YAAmB;SAAG,GAC1B;QACN,SAAS;YAAE,mBAAmB;QAAK;IACrC;IAEA,IAAI,CAAC,YAAY;QACf,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAE,WAAU;8BAAwB;;;;;;8BACrC,6LAAC,wIAAM;oBAAC,MAAK;oBAAS,SAAS;8BAAQ;;;;;;;;;;;;IAG7C;IAEA,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAwB;;;;;;IAEzD,MAAM,aAAa,QAAQ,MAAM,CAA2B,CAAC,KAAK;QAChE,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,GAAG,GAAG,CAAC,EAAE,QAAQ,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC;QAC/C,OAAO;IACT,GAAG,CAAC;IAEJ,MAAM,UAAU,kBAAkB,MAAM,IAAI,cAAc,kBAAkB,MAAM,IAAI;IACtF,MAAM,aAAa,KAAK,IAAI,CAAC,AAAC,kBAAkB,MAAM,GAAG,KAAM;IAE/D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;;oBAAgC;oBACgC;oBAAW;;;;;;;0BAExF,6LAAC;gBAAI,WAAU;0BACZ,OAAO,OAAO,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,UAAU,KAAK,iBAC/C,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAC1D,6LAAC;gCAAI,WAAU;0CACZ,KAAK,GAAG,CAAC,CAAC,kBACT,6LAAC;wCAEC,MAAK;wCACL,SAAS,IAAM,OAAO,EAAE,EAAE;wCAC1B,WAAW,IAAA,qHAAE,EACX,mEACA,kBAAkB,QAAQ,CAAC,EAAE,EAAE,IAC3B,oDACA;kDAGL,EAAE,IAAI;uCAVF,EAAE,EAAE;;;;;;;;;;;uBALP;;;;;;;;;;0BAsBd,6LAAC;gBAAE,WAAU;;oBAAgC;oBAChC,kBAAkB,MAAM;oBAAC;oBAAI;;;;;;;0BAE1C,6LAAC,wIAAM;gBAAC,MAAK;gBAAS,SAAS;gBAAQ,UAAU,CAAC;0BAAS;;;;;;;;;;;;AAKjE;GAhFgB;;QACK,kJAAe;QACR,kJAAe;QACxB,kJAAe;;;KAHlB"}},
    {"offset": {"line": 907, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/Teleprompter.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nconst INTERVAL_MIN = 12;\r\nconst INTERVAL_MAX = 18;\r\n\r\nexport function Teleprompter({\r\n  prompts,\r\n  isRecording,\r\n}: {\r\n  prompts: { id: string; text: string }[];\r\n  isRecording: boolean;\r\n}) {\r\n  const [index, setIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!isRecording || prompts.length === 0) return;\r\n    const delay = (INTERVAL_MIN + Math.random() * (INTERVAL_MAX - INTERVAL_MIN)) * 1000;\r\n    const t = setTimeout(() => {\r\n      setIndex((i) => (i + 1) % prompts.length);\r\n    }, delay);\r\n    return () => clearTimeout(t);\r\n  }, [isRecording, index, prompts.length]);\r\n\r\n  if (prompts.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-[4rem] flex items-center justify-center px-4\">\r\n      <AnimatePresence mode=\"wait\">\r\n        <motion.p\r\n          key={prompts[index]?.id ?? index}\r\n          initial={{ opacity: 0, y: 8 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -8 }}\r\n          transition={{ duration: 0.4 }}\r\n          className=\"text-center text-lg text-foreground max-w-lg\"\r\n        >\r\n          {prompts[index]?.text}\r\n        </motion.p>\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAKA,MAAM,eAAe;AACrB,MAAM,eAAe;AAEd,SAAS,aAAa,EAC3B,OAAO,EACP,WAAW,EAIZ;;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,eAAe,QAAQ,MAAM,KAAK,GAAG;YAC1C,MAAM,QAAQ,CAAC,eAAe,KAAK,MAAM,KAAK,CAAC,eAAe,YAAY,CAAC,IAAI;YAC/E,MAAM,IAAI;4CAAW;oBACnB;oDAAS,CAAC,IAAM,CAAC,IAAI,CAAC,IAAI,QAAQ,MAAM;;gBAC1C;2CAAG;YACH;0CAAO,IAAM,aAAa;;QAC5B;iCAAG;QAAC;QAAa;QAAO,QAAQ,MAAM;KAAC;IAEvC,IAAI,QAAQ,MAAM,KAAK,GAAG,OAAO;IAEjC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,+MAAe;YAAC,MAAK;sBACpB,cAAA,6LAAC,uMAAM,CAAC,CAAC;gBAEP,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,MAAM;oBAAE,SAAS;oBAAG,GAAG,CAAC;gBAAE;gBAC1B,YAAY;oBAAE,UAAU;gBAAI;gBAC5B,WAAU;0BAET,OAAO,CAAC,MAAM,EAAE;eAPZ,OAAO,CAAC,MAAM,EAAE,MAAM;;;;;;;;;;;;;;;AAYrC;GApCgB;KAAA"}},
    {"offset": {"line": 1102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/AudioRecorder.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useState, useCallback } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Teleprompter } from \"./Teleprompter\";\r\n\r\nconst MAX_SECONDS = 2 * 60; // 2:00\r\n\r\nexport function AudioRecorder({\r\n  onComplete,\r\n  promptSnapshots,\r\n  guidedMode,\r\n}: {\r\n  onComplete: (blob: Blob) => void;\r\n  promptSnapshots: { id: string; text: string }[];\r\n  guidedMode: boolean;\r\n}) {\r\n  const [recording, setRecording] = useState(false);\r\n  const [secondsLeft, setSecondsLeft] = useState(MAX_SECONDS);\r\n  const [blob, setBlob] = useState<Blob | null>(null);\r\n  const mediaRecorder = useRef<MediaRecorder | null>(null);\r\n  const chunks = useRef<Blob[]>([]);\r\n  const timer = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n  const stop = useCallback(() => {\r\n    if (timer.current) clearInterval(timer.current);\r\n    timer.current = null;\r\n    setRecording(false);\r\n    if (mediaRecorder.current?.state === \"recording\") {\r\n      mediaRecorder.current.stop();\r\n    }\r\n  }, []);\r\n\r\n  const start = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new MediaRecorder(stream);\r\n      chunks.current = [];\r\n      recorder.ondataavailable = (e) => e.data.size && chunks.current.push(e.data);\r\n      recorder.onstop = () => {\r\n        stream.getTracks().forEach((t) => t.stop());\r\n        const b = new Blob(chunks.current, { type: \"audio/webm\" });\r\n        setBlob(b);\r\n      };\r\n      mediaRecorder.current = recorder;\r\n      recorder.start();\r\n      setRecording(true);\r\n      setSecondsLeft(MAX_SECONDS);\r\n      timer.current = setInterval(() => {\r\n        setSecondsLeft((s) => {\r\n          if (s <= 1) {\r\n            stop();\r\n            return 0;\r\n          }\r\n          return s - 1;\r\n        });\r\n      }, 1000);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const format = (s: number) => {\r\n    const m = Math.floor(s / 60);\r\n    const sec = s % 60;\r\n    return `${m}:${sec.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  if (blob) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <p className=\"text-sm text-muted-foreground\">Recording saved. You can go back to re-record or proceed.</p>\r\n        <Button type=\"button\" onClick={() => { setBlob(null); }}>Re-record</Button>\r\n        <Button type=\"button\" onClick={() => onComplete(blob)}>Use this recording</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {guidedMode && promptSnapshots.length > 0 && (\r\n        <Teleprompter prompts={promptSnapshots} isRecording={recording} />\r\n      )}\r\n      <div className=\"flex flex-col items-center gap-4\">\r\n        <span className=\"text-2xl font-mono tabular-nums\">{format(secondsLeft)}</span>\r\n        {!recording ? (\r\n          <Button type=\"button\" onClick={start}>Start recording (max 2:00)</Button>\r\n        ) : (\r\n          <Button type=\"button\" variant=\"destructive\" onClick={stop}>Stop</Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,cAAc,IAAI,IAAI,OAAO;AAE5B,SAAS,cAAc,EAC5B,UAAU,EACV,eAAe,EACf,UAAU,EAKX;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,gBAAgB,IAAA,uKAAM,EAAuB;IACnD,MAAM,SAAS,IAAA,uKAAM,EAAS,EAAE;IAChC,MAAM,QAAQ,IAAA,uKAAM,EAAwC;IAE5D,MAAM,OAAO,IAAA,4KAAW;2CAAC;YACvB,IAAI,MAAM,OAAO,EAAE,cAAc,MAAM,OAAO;YAC9C,MAAM,OAAO,GAAG;YAChB,aAAa;YACb,IAAI,cAAc,OAAO,EAAE,UAAU,aAAa;gBAChD,cAAc,OAAO,CAAC,IAAI;YAC5B;QACF;0CAAG,EAAE;IAEL,MAAM,QAAQ;QACZ,IAAI;YACF,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;gBAAE,OAAO;YAAK;YACvE,MAAM,WAAW,IAAI,cAAc;YACnC,OAAO,OAAO,GAAG,EAAE;YACnB,SAAS,eAAe,GAAG,CAAC,IAAM,EAAE,IAAI,CAAC,IAAI,IAAI,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI;YAC3E,SAAS,MAAM,GAAG;gBAChB,OAAO,SAAS,GAAG,OAAO,CAAC,CAAC,IAAM,EAAE,IAAI;gBACxC,MAAM,IAAI,IAAI,KAAK,OAAO,OAAO,EAAE;oBAAE,MAAM;gBAAa;gBACxD,QAAQ;YACV;YACA,cAAc,OAAO,GAAG;YACxB,SAAS,KAAK;YACd,aAAa;YACb,eAAe;YACf,MAAM,OAAO,GAAG,YAAY;gBAC1B,eAAe,CAAC;oBACd,IAAI,KAAK,GAAG;wBACV;wBACA,OAAO;oBACT;oBACA,OAAO,IAAI;gBACb;YACF,GAAG;QACL,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,MAAM,SAAS,CAAC;QACd,MAAM,IAAI,KAAK,KAAK,CAAC,IAAI;QACzB,MAAM,MAAM,IAAI;QAChB,OAAO,GAAG,EAAE,CAAC,EAAE,IAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAClD;IAEA,IAAI,MAAM;QACR,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAE,WAAU;8BAAgC;;;;;;8BAC7C,6LAAC,wIAAM;oBAAC,MAAK;oBAAS,SAAS;wBAAQ,QAAQ;oBAAO;8BAAG;;;;;;8BACzD,6LAAC,wIAAM;oBAAC,MAAK;oBAAS,SAAS,IAAM,WAAW;8BAAO;;;;;;;;;;;;IAG7D;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,cAAc,gBAAgB,MAAM,GAAG,mBACtC,6LAAC,yJAAY;gBAAC,SAAS;gBAAiB,aAAa;;;;;;0BAEvD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAAmC,OAAO;;;;;;oBACzD,CAAC,0BACA,6LAAC,wIAAM;wBAAC,MAAK;wBAAS,SAAS;kCAAO;;;;;6CAEtC,6LAAC,wIAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAc,SAAS;kCAAM;;;;;;;;;;;;;;;;;;AAKrE;GArFgB;KAAA"}},
    {"offset": {"line": 1275, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/VideoRecorder.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useState, useCallback, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Teleprompter } from \"./Teleprompter\";\r\n\r\nconst MAX_SECONDS = 90; // 1:30\r\n\r\nexport function VideoRecorder({\r\n  onComplete,\r\n  promptSnapshots,\r\n  guidedMode,\r\n}: {\r\n  onComplete: (blob: Blob) => void;\r\n  promptSnapshots: { id: string; text: string }[];\r\n  guidedMode: boolean;\r\n}) {\r\n  const [recording, setRecording] = useState(false);\r\n  const [secondsLeft, setSecondsLeft] = useState(MAX_SECONDS);\r\n  const [blob, setBlob] = useState<Blob | null>(null);\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const mediaRecorder = useRef<MediaRecorder | null>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const chunks = useRef<Blob[]>([]);\r\n  const timer = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n  const stop = useCallback(() => {\r\n    if (timer.current) clearInterval(timer.current);\r\n    timer.current = null;\r\n    setRecording(false);\r\n    if (mediaRecorder.current?.state === \"recording\") {\r\n      mediaRecorder.current.stop();\r\n    }\r\n    streamRef.current?.getTracks().forEach((t) => t.stop());\r\n  }, []);\r\n\r\n  const start = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n      streamRef.current = stream;\r\n      if (videoRef.current) videoRef.current.srcObject = stream;\r\n      const recorder = new MediaRecorder(stream);\r\n      chunks.current = [];\r\n      recorder.ondataavailable = (e) => e.data.size && chunks.current.push(e.data);\r\n      recorder.onstop = () => {\r\n        const b = new Blob(chunks.current, { type: \"video/webm\" });\r\n        setBlob(b);\r\n      };\r\n      mediaRecorder.current = recorder;\r\n      recorder.start();\r\n      setRecording(true);\r\n      setSecondsLeft(MAX_SECONDS);\r\n      timer.current = setInterval(() => {\r\n        setSecondsLeft((s) => {\r\n          if (s <= 1) {\r\n            stop();\r\n            return 0;\r\n          }\r\n          return s - 1;\r\n        });\r\n      }, 1000);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => () => { stop(); }, [stop]);\r\n\r\n  const format = (s: number) => {\r\n    const m = Math.floor(s / 60);\r\n    const sec = s % 60;\r\n    return `${m}:${sec.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  if (blob) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <p className=\"text-sm text-muted-foreground\">Recording saved. You can go back to re-record or proceed.</p>\r\n        <Button type=\"button\" onClick={() => setBlob(null)}>Re-record</Button>\r\n        <Button type=\"button\" onClick={() => onComplete(blob)}>Use this recording</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {guidedMode && promptSnapshots.length > 0 && (\r\n        <Teleprompter prompts={promptSnapshots} isRecording={recording} />\r\n      )}\r\n      <div className=\"relative rounded-lg overflow-hidden bg-muted aspect-video max-w-lg mx-auto\">\r\n        <video ref={videoRef} autoPlay muted playsInline className=\"w-full h-full object-cover\" />\r\n        <div className=\"absolute bottom-2 left-2 font-mono text-white bg-black/70 px-2 py-1 rounded\">\r\n          {format(secondsLeft)}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-center gap-2\">\r\n        {!recording ? (\r\n          <Button type=\"button\" onClick={start}>Start recording (max 1:30)</Button>\r\n        ) : (\r\n          <Button type=\"button\" variant=\"destructive\" onClick={stop}>Stop</Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1480, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepRecordOrWrite.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { AudioRecorder } from \"../AudioRecorder\";\r\nimport { VideoRecorder } from \"../VideoRecorder\";\r\n\r\nexport function StepRecordOrWrite({ onNext }: { onNext: () => void }) {\r\n  const messageType = useComposeStore((s) => s.messageType);\r\n  const textContent = useComposeStore((s) => s.textContent);\r\n  const guidedMode = useComposeStore((s) => s.guidedMode);\r\n  const selectedPromptIds = useComposeStore((s) => s.selectedPromptIds) ?? [];\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n\r\n  const [snapshots, setSnapshots] = useState<{ id: string; text: string }[]>([]);\r\n  useEffect(() => {\r\n    if (selectedPromptIds.length === 0) {\r\n      setSnapshots([]);\r\n      return;\r\n    }\r\n    const supabase = createClient();\r\n    supabase\r\n      .from(\"prompts\")\r\n      .select(\"id, text\")\r\n      .in(\"id\", selectedPromptIds)\r\n      .then(({ data }) => {\r\n        setSnapshots((data ?? []).map((p) => ({ id: p.id, text: p.text })));\r\n      });\r\n  }, [selectedPromptIds]);\r\n\r\n  if (messageType === \"text\") {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"textContent\">Your message</Label>\r\n          <textarea\r\n            id=\"textContent\"\r\n            className=\"flex min-h-[200px] w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\r\n            placeholder=\"Write anything you want your future self to read…\"\r\n            value={textContent ?? \"\"}\r\n            onChange={(e) => setDraft({ textContent: e.target.value })}\r\n          />\r\n        </div>\r\n        {textContent && (\r\n          <Card className=\"bg-muted/50\">\r\n            <CardContent className=\"p-4\">\r\n              <p className=\"text-sm whitespace-pre-wrap\">{textContent}</p>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n        <button\r\n          type=\"button\"\r\n          className=\"inline-flex items-center justify-center rounded-md text-sm font-medium h-10 px-4 bg-foreground text-background hover:bg-foreground/90\"\r\n          onClick={onNext}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (messageType === \"audio\") {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <AudioRecorder\r\n          promptSnapshots={snapshots}\r\n          guidedMode={guidedMode ?? true}\r\n          onComplete={(blob) => {\r\n            setDraft({ mediaBlob: blob });\r\n            onNext();\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (messageType === \"video\") {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <VideoRecorder\r\n          promptSnapshots={snapshots}\r\n          guidedMode={guidedMode ?? true}\r\n          onComplete={(blob) => {\r\n            setDraft({ mediaBlob: blob });\r\n            onNext();\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <p className=\"text-muted-foreground\">Select a message type in the previous step.</p>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUO,SAAS,kBAAkB,EAAE,MAAM,EAA0B;;IAClE,MAAM,cAAc,IAAA,kJAAe;0DAAC,CAAC,IAAM,EAAE,WAAW;;IACxD,MAAM,cAAc,IAAA,kJAAe;0DAAC,CAAC,IAAM,EAAE,WAAW;;IACxD,MAAM,aAAa,IAAA,kJAAe;yDAAC,CAAC,IAAM,EAAE,UAAU;;IACtD,MAAM,oBAAoB,IAAA,kJAAe;6CAAC,CAAC,IAAM,EAAE,iBAAiB;+CAAK,EAAE;IAC3E,MAAM,WAAW,IAAA,kJAAe;uDAAC,CAAC,IAAM,EAAE,QAAQ;;IAElD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAiC,EAAE;IAC7E,IAAA,0KAAS;uCAAC;YACR,IAAI,kBAAkB,MAAM,KAAK,GAAG;gBAClC,aAAa,EAAE;gBACf;YACF;YACA,MAAM,WAAW,IAAA,4IAAY;YAC7B,SACG,IAAI,CAAC,WACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,mBACT,IAAI;+CAAC,CAAC,EAAE,IAAI,EAAE;oBACb,aAAa,CAAC,QAAQ,EAAE,EAAE,GAAG;uDAAC,CAAC,IAAM,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,MAAM,EAAE,IAAI;4BAAC,CAAC;;gBAClE;;QACJ;sCAAG;QAAC;KAAkB;IAEtB,IAAI,gBAAgB,QAAQ;QAC1B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,sIAAK;4BAAC,SAAQ;sCAAc;;;;;;sCAC7B,6LAAC;4BACC,IAAG;4BACH,WAAU;4BACV,aAAY;4BACZ,OAAO,eAAe;4BACtB,UAAU,CAAC,IAAM,SAAS;oCAAE,aAAa,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;;;;;;;gBAG3D,6BACC,6LAAC,oIAAI;oBAAC,WAAU;8BACd,cAAA,6LAAC,2IAAW;wBAAC,WAAU;kCACrB,cAAA,6LAAC;4BAAE,WAAU;sCAA+B;;;;;;;;;;;;;;;;8BAIlD,6LAAC;oBACC,MAAK;oBACL,WAAU;oBACV,SAAS;8BACV;;;;;;;;;;;;IAKP;IAEA,IAAI,gBAAgB,SAAS;QAC3B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,2JAAa;gBACZ,iBAAiB;gBACjB,YAAY,cAAc;gBAC1B,YAAY,CAAC;oBACX,SAAS;wBAAE,WAAW;oBAAK;oBAC3B;gBACF;;;;;;;;;;;IAIR;IAEA,IAAI,gBAAgB,SAAS;QAC3B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,2JAAa;gBACZ,iBAAiB;gBACjB,YAAY,cAAc;gBAC1B,YAAY,CAAC;oBACX,SAAS;wBAAE,WAAW;oBAAK;oBAC3B;gBACF;;;;;;;;;;;IAIR;IAEA,qBACE,6LAAC;QAAE,WAAU;kBAAwB;;;;;;AAEzC;GAvFgB;;QACM,kJAAe;QACf,kJAAe;QAChB,kJAAe;QACR,kJAAe;QACxB,kJAAe;;;KALlB"}},
    {"offset": {"line": 1688, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepSong.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useComposeStore } from \"@/lib/store/composeStore\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nexport function StepSong({ onNext }: { onNext: () => void }) {\r\n  const songTitle = useComposeStore((s) => s.songTitle);\r\n  const songArtist = useComposeStore((s) => s.songArtist);\r\n  const songUrl = useComposeStore((s) => s.songUrl);\r\n  const setDraft = useComposeStore((s) => s.setDraft);\r\n\r\n  const handleUrl = (url: string) => {\r\n    setDraft({ songUrl: url || null });\r\n    if (!url) {\r\n      setDraft({ songTitle: null, songArtist: null });\r\n      return;\r\n    }\r\n    setDraft({ songTitle: null, songArtist: null });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Optional: add a song that reminds you of this moment. We’ll store the link only (no playback in-app). Paste a Spotify or Apple Music URL.\r\n      </p>\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"songUrl\">Song URL</Label>\r\n        <Input\r\n          id=\"songUrl\"\r\n          type=\"url\"\r\n          placeholder=\"https://open.spotify.com/track/… or https://music.apple.com/…\"\r\n          value={songUrl ?? \"\"}\r\n          onChange={(e) => handleUrl(e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"songTitle\">Song title (optional)</Label>\r\n          <Input\r\n            id=\"songTitle\"\r\n            value={songTitle ?? \"\"}\r\n            onChange={(e) => setDraft({ songTitle: e.target.value || null })}\r\n            placeholder=\"Title\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"songArtist\">Artist (optional)</Label>\r\n          <Input\r\n            id=\"songArtist\"\r\n            value={songArtist ?? \"\"}\r\n            onChange={(e) => setDraft({ songArtist: e.target.value || null })}\r\n            placeholder=\"Artist\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <Button type=\"button\" onClick={onNext}>Next</Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS,SAAS,EAAE,MAAM,EAA0B;;IACzD,MAAM,YAAY,IAAA,kJAAe;+CAAC,CAAC,IAAM,EAAE,SAAS;;IACpD,MAAM,aAAa,IAAA,kJAAe;gDAAC,CAAC,IAAM,EAAE,UAAU;;IACtD,MAAM,UAAU,IAAA,kJAAe;6CAAC,CAAC,IAAM,EAAE,OAAO;;IAChD,MAAM,WAAW,IAAA,kJAAe;8CAAC,CAAC,IAAM,EAAE,QAAQ;;IAElD,MAAM,YAAY,CAAC;QACjB,SAAS;YAAE,SAAS,OAAO;QAAK;QAChC,IAAI,CAAC,KAAK;YACR,SAAS;gBAAE,WAAW;gBAAM,YAAY;YAAK;YAC7C;QACF;QACA,SAAS;YAAE,WAAW;YAAM,YAAY;QAAK;IAC/C;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;0BAAgC;;;;;;0BAG7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,sIAAK;wBAAC,SAAQ;kCAAU;;;;;;kCACzB,6LAAC,sIAAK;wBACJ,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO,WAAW;wBAClB,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAG7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,sIAAK;gCAAC,SAAQ;0CAAY;;;;;;0CAC3B,6LAAC,sIAAK;gCACJ,IAAG;gCACH,OAAO,aAAa;gCACpB,UAAU,CAAC,IAAM,SAAS;wCAAE,WAAW,EAAE,MAAM,CAAC,KAAK,IAAI;oCAAK;gCAC9D,aAAY;;;;;;;;;;;;kCAGhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,sIAAK;gCAAC,SAAQ;0CAAa;;;;;;0CAC5B,6LAAC,sIAAK;gCACJ,IAAG;gCACH,OAAO,cAAc;gCACrB,UAAU,CAAC,IAAM,SAAS;wCAAE,YAAY,EAAE,MAAM,CAAC,KAAK,IAAI;oCAAK;gCAC/D,aAAY;;;;;;;;;;;;;;;;;;0BAIlB,6LAAC,wIAAM;gBAAC,MAAK;gBAAS,SAAS;0BAAQ;;;;;;;;;;;;AAG7C;GArDgB;;QACI,kJAAe;QACd,kJAAe;QAClB,kJAAe;QACd,kJAAe;;;KAJlB"}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/lib/validation.ts"],"sourcesContent":["const MAX_TEXT_LENGTH = 50_000;\nconst ALLOWED_SONG_HOSTS = [\"open.spotify.com\", \"music.apple.com\", \"spotify.com\", \"apple.co\"];\n\nexport function validateTextContent(text: string | null | undefined): string | null {\n  if (text == null || text === \"\") return \"Message content is required for text type.\";\n  if (text.length > MAX_TEXT_LENGTH) return `Text must be under ${MAX_TEXT_LENGTH} characters.`;\n  return null;\n}\n\nexport function validateSongUrl(url: string | null | undefined): string | null {\n  if (!url) return null;\n  try {\n    const u = new URL(url);\n    const ok = ALLOWED_SONG_HOSTS.some((h) => u.hostname === h || u.hostname.endsWith(`.${h}`));\n    if (!ok) return \"Please use a Spotify or Apple Music link.\";\n  } catch {\n    return \"Invalid URL.\";\n  }\n  return null;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,kBAAkB;AACxB,MAAM,qBAAqB;IAAC;IAAoB;IAAmB;IAAe;CAAW;AAEtF,SAAS,oBAAoB,IAA+B;IACjE,IAAI,QAAQ,QAAQ,SAAS,IAAI,OAAO;IACxC,IAAI,KAAK,MAAM,GAAG,iBAAiB,OAAO,CAAC,mBAAmB,EAAE,gBAAgB,YAAY,CAAC;IAC7F,OAAO;AACT;AAEO,SAAS,gBAAgB,GAA8B;IAC5D,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI;QACF,MAAM,IAAI,IAAI,IAAI;QAClB,MAAM,KAAK,mBAAmB,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,KAAK,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,GAAG;QACzF,IAAI,CAAC,IAAI,OAAO;IAClB,EAAE,OAAM;QACN,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 1910, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/steps/StepReview.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { useComposeStore } from \"@/lib/store/composeStore\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { validateTextContent, validateSongUrl } from \"@/lib/validation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport function StepReview({ onSuccess }: { onSuccess: () => void }) {\n  const deliverMode = useComposeStore((s) => s.deliverMode);\n  const deliverAt = useComposeStore((s) => s.deliverAt);\n  const birthdayDay = useComposeStore((s) => s.birthdayDay);\n  const birthdayMonth = useComposeStore((s) => s.birthdayMonth);\n  const timezone = useComposeStore((s) => s.timezone);\n  const messageType = useComposeStore((s) => s.messageType);\n  const textContent = useComposeStore((s) => s.textContent);\n  const selectedPromptIds = useComposeStore((s) => s.selectedPromptIds);\n  const guidedMode = useComposeStore((s) => s.guidedMode);\n  const songTitle = useComposeStore((s) => s.songTitle);\n  const songArtist = useComposeStore((s) => s.songArtist);\n  const songUrl = useComposeStore((s) => s.songUrl);\n  const mediaBlob = useComposeStore((s) => s.mediaBlob);\n  const editMessageId = useComposeStore((s) => s.editMessageId);\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const supabase = createClient();\n\n  // #region agent log\n  const renders = useRef(0);\n  renders.current += 1;\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\" && renders.current > 40) {\n    fetch(\"http://127.0.0.1:7245/ingest/f8e7f2d9-6acb-412e-aa62-ecdc1a46b856\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ location: \"StepReview.tsx\", message: \"runaway renders\", data: { count: renders.current, deliverMode, messageType }, timestamp: Date.now(), sessionId: \"debug-session\", hypothesisId: \"H1-primitive\", runId: \"post-fix\" }) }).catch(() => {});\n  }\n  // #endregion\n\n  const deliverAtDisplay = deliverMode === \"birthday\"\n    ? (birthdayDay != null && birthdayMonth != null\n        ? `Your birthday (${birthdayMonth}/${birthdayDay})`\n        : \"Birthday (set month/day)\")\n    : deliverAt\n      ? new Date(deliverAt).toLocaleString()\n      : \"—\";\n\n  const handleConfirm = async () => {\n    setLoading(true);\n    setError(null);\n    const textErr = messageType === \"text\" ? validateTextContent(textContent) : null;\n    const songErr = validateSongUrl(songUrl);\n    if (textErr || songErr) {\n      setError(textErr ?? songErr ?? null);\n      setLoading(false);\n      return;\n    }\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        setError(\"Not signed in\");\n        setLoading(false);\n        return;\n      }\n      let deliverAtDate: string;\n      if (deliverMode === \"birthday\" && birthdayDay != null && birthdayMonth != null) {\n        const now = new Date();\n        let y = now.getFullYear();\n        let d = new Date(y, birthdayMonth - 1, birthdayDay);\n        if (d <= now) d = new Date(y + 1, birthdayMonth - 1, birthdayDay);\n        deliverAtDate = d.toISOString();\n      } else if (deliverAt) {\n        deliverAtDate = new Date(deliverAt).toISOString();\n      } else {\n        setError(\"Set delivery date\");\n        setLoading(false);\n        return;\n      }\n      const prompts = (selectedPromptIds ?? []).map((id) => ({ id, text: \"\" }));\n      const payload = {\n        type: messageType ?? \"text\",\n        text_content: messageType === \"text\" ? (textContent ?? null) : null,\n        deliver_at: deliverAtDate,\n        deliver_mode: deliverMode ?? \"date\",\n        birthday_day: birthdayDay ?? null,\n        birthday_month: birthdayMonth ?? null,\n        timezone: timezone ?? null,\n        guided_mode: guidedMode ?? true,\n        selected_prompts: prompts,\n        song_title: songTitle ?? null,\n        song_artist: songArtist ?? null,\n        song_url: songUrl ?? null,\n      };\n      let messageId: string;\n      if (editMessageId) {\n        const { error: updateErr } = await supabase\n          .from(\"messages\")\n          .update(payload)\n          .eq(\"id\", editMessageId)\n          .eq(\"user_id\", user.id);\n        if (updateErr) {\n          setError(updateErr.message);\n          setLoading(false);\n          return;\n        }\n        messageId = editMessageId;\n        if (mediaBlob) {\n          const ext = \"webm\";\n          const path = `${user.id}/${messageId}/media.${ext}`;\n          const { error: uploadErr } = await supabase.storage\n            .from(\"capsule-media\")\n            .upload(path, mediaBlob, { upsert: true });\n          if (!uploadErr) {\n            await supabase.from(\"messages\").update({ media_path: path }).eq(\"id\", messageId);\n          }\n        }\n      } else {\n        const { data: msg, error: insertErr } = await supabase\n          .from(\"messages\")\n          .insert({\n            user_id: user.id,\n            ...payload,\n            media_path: null,\n            status: \"scheduled\",\n          })\n          .select(\"id\")\n          .single();\n        if (insertErr) {\n          setError(insertErr.message);\n          setLoading(false);\n          return;\n        }\n        messageId = msg!.id;\n        if (mediaBlob) {\n          const ext = \"webm\";\n          const path = `${user.id}/${messageId}/media.${ext}`;\n          const { error: uploadErr } = await supabase.storage\n            .from(\"capsule-media\")\n            .upload(path, mediaBlob, { upsert: true });\n          if (uploadErr) {\n            setError(uploadErr.message);\n            setLoading(false);\n            return;\n          }\n          await supabase.from(\"messages\").update({ media_path: path }).eq(\"id\", messageId);\n        }\n      }\n      useComposeStore.getState().reset();\n      onSuccess();\n    } catch (e) {\n      setError(e instanceof Error ? e.message : \"Something went wrong\");\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"bg-muted/50\">\n        <CardContent className=\"p-4 space-y-2 text-sm\">\n          <p><strong>Delivery:</strong> {deliverAtDisplay}</p>\n          <p><strong>Type:</strong> {messageType ?? \"—\"}</p>\n          <p><strong>Guided prompts:</strong> {(selectedPromptIds ?? []).length}</p>\n          <p><strong>Song link:</strong> {songUrl ? \"Yes\" : \"No\"}</p>\n        </CardContent>\n      </Card>\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      <Button onClick={handleConfirm} disabled={loading}>\n        {loading ? \"Saving…\" : \"Confirm & save\"}\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/components/compose/ComposerStepper.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useComposeStore } from \"@/lib/store/composeStore\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { StepDelivery } from \"./steps/StepDelivery\";\nimport { StepMessageType } from \"./steps/StepMessageType\";\nimport { StepGuidedToggle } from \"./steps/StepGuidedToggle\";\nimport { StepPrompts } from \"./steps/StepPrompts\";\nimport { StepRecordOrWrite } from \"./steps/StepRecordOrWrite\";\nimport { StepSong } from \"./steps/StepSong\";\nimport { StepReview } from \"./steps/StepReview\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst STEPS = [\n  { id: \"delivery\", title: \"When to deliver\" },\n  { id: \"type\", title: \"Message type\" },\n  { id: \"guided\", title: \"Guided mode\" },\n  { id: \"prompts\", title: \"Prompts\" },\n  { id: \"content\", title: \"Your message\" },\n  { id: \"song\", title: \"Nostalgia song\" },\n  { id: \"review\", title: \"Review\" },\n];\n\nexport function ComposerStepper() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [stepIndex, setStepIndex] = useState(0);\n  const setDraft = useComposeStore((s) => s.setDraft);\n\n  useEffect(() => {\n    const presetParam = searchParams.get(\"preset\");\n    if (presetParam && [\"1y\", \"5y\", \"10y\", \"custom\", \"birthday\"].includes(presetParam)) {\n      setDraft({ preset: presetParam as \"1y\" | \"5y\" | \"10y\" | \"custom\" | \"birthday\" });\n    }\n    const editId = searchParams.get(\"edit\");\n    if (editId) {\n      setDraft({ editMessageId: editId });\n      createClient()\n        .from(\"messages\")\n        .select(\"*\")\n        .eq(\"id\", editId)\n        .single()\n        .then(({ data }) => {\n          if (data) {\n            setDraft({\n              deliverMode: data.deliver_mode,\n              deliverAt: data.deliver_at,\n              birthdayDay: data.birthday_day,\n              birthdayMonth: data.birthday_month,\n              timezone: data.timezone ?? undefined,\n              messageType: data.type,\n              guidedMode: data.guided_mode,\n              selectedPromptIds: (data.selected_prompts ?? []).map((p: { id: string }) => p.id),\n              textContent: data.text_content ?? undefined,\n              mediaPath: data.media_path ?? null,\n              songTitle: data.song_title ?? null,\n              songArtist: data.song_artist ?? null,\n              songUrl: data.song_url ?? null,\n            });\n          }\n        });\n    }\n  }, [searchParams, setDraft]);\n\n  const step = STEPS[stepIndex];\n  const canNext = stepIndex < STEPS.length - 1;\n  const canPrev = stepIndex > 0;\n\n  const goNext = () => {\n    if (canNext) setStepIndex((i) => i + 1);\n  };\n  const goPrev = () => {\n    if (canPrev) setStepIndex((i) => i - 1);\n  };\n\n  const onReviewSuccess = useCallback(() => {\n    router.push(\"/inbox\");\n  }, [router]);\n\n  return (\n    <div className=\"container max-w-2xl py-8 px-4\">\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-lg\">Step {stepIndex + 1}: {step.title}</CardTitle>\n          <div className=\"flex gap-1 mt-2\">\n            {STEPS.map((s, i) => (\n              <button\n                key={s.id}\n                type=\"button\"\n                onClick={() => setStepIndex(i)}\n                className={`h-1.5 flex-1 rounded-full transition-colors ${\n                  i <= stepIndex ? \"bg-foreground\" : \"bg-muted\"\n                }`}\n                aria-label={`Go to step ${i + 1}`}\n              />\n            ))}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {step.id === \"delivery\" && <StepDelivery onNext={goNext} />}\n          {step.id === \"type\" && <StepMessageType onNext={goNext} />}\n          {step.id === \"guided\" && <StepGuidedToggle onNext={goNext} />}\n          {step.id === \"prompts\" && <StepPrompts onNext={goNext} />}\n          {step.id === \"content\" && <StepRecordOrWrite onNext={goNext} />}\n          {step.id === \"song\" && <StepSong onNext={goNext} />}\n          {step.id === \"review\" && <StepReview onSuccess={onReviewSuccess} />}\n          <div className=\"flex justify-between pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={goPrev} disabled={!canPrev}>\n              Back\n            </Button>\n            {step.id !== \"review\" && (\n              <Button type=\"button\" onClick={goNext} disabled={!canNext}>\n                Next\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2545, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/app/compose/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComposerStepper } from \"@/components/compose/ComposerStepper\";\n\nexport default function ComposePage() {\n  return <ComposerStepper />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6LAAC,+JAAe;;;;;AACzB;KAFwB"}}]
}