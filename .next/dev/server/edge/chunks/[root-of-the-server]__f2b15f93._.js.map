{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\r\nimport { NextResponse, type NextRequest } from \"next/server\";\r\n\r\nconst protectedPaths = [\"/compose\", \"/inbox\"];\r\nconst authPaths = [\"/login\", \"/signup\"];\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  let response = NextResponse.next({ request });\r\n  const supabase = createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return request.cookies.getAll();\r\n        },\r\n        setAll(cookiesToSet) {\r\n          cookiesToSet.forEach(({ name, value, options }) => {\r\n            request.cookies.set(name, value);\r\n            response.cookies.set(name, value, options);\r\n          });\r\n        },\r\n      },\r\n    }\r\n  );\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n  const path = request.nextUrl.pathname;\r\n  const isProtected = protectedPaths.some((p) => path.startsWith(p));\r\n  const isAuthPage = authPaths.some((p) => path.startsWith(p));\r\n\r\n  if (isProtected && !user) {\r\n    const redirect = new URL(\"/\", request.url);\r\n    redirect.searchParams.set(\"signin\", \"1\");\r\n    return NextResponse.redirect(redirect);\r\n  }\r\n  if (isAuthPage && user) {\r\n    return NextResponse.redirect(new URL(\"/inbox\", request.url));\r\n  }\r\n  return response;\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico|api|open).*)\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IAAC;IAAY;CAAS;AAC7C,MAAM,YAAY;IAAC;IAAU;CAAU;AAEhC,eAAe,WAAW,OAAoB;IACnD,IAAI,WAAW,gMAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;IAC3C,MAAM,WAAW,IAAA,uMAAkB,sUAGjC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;oBAC5C,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;oBAC1B,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBACpC;YACF;QACF;IACF;IAEF,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC/B,MAAM,OAAO,QAAQ,OAAO,CAAC,QAAQ;IACrC,MAAM,cAAc,eAAe,IAAI,CAAC,CAAC,IAAM,KAAK,UAAU,CAAC;IAC/D,MAAM,aAAa,UAAU,IAAI,CAAC,CAAC,IAAM,KAAK,UAAU,CAAC;IAEzD,IAAI,eAAe,CAAC,MAAM;QACxB,MAAM,WAAW,IAAI,IAAI,KAAK,QAAQ,GAAG;QACzC,SAAS,YAAY,CAAC,GAAG,CAAC,UAAU;QACpC,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IACA,IAAI,cAAc,MAAM;QACtB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;IACA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAyD;AACrE"}}]
}