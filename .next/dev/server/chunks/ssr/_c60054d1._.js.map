{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/lib/supabase/env.ts"],"sourcesContent":["/**\n * Supabase env validation. Throws a clear error listing missing vars.\n * Use one key: publishable (new) or anon (legacy).\n */\n\nconst URL = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst PUBLISHABLE = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\nconst ANON = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nexport const SUPABASE_URL = URL?.trim() || null;\nexport const SUPABASE_KEY = (PUBLISHABLE ?? ANON)?.trim() ?? null;\n\nexport function getSupabaseUrl(): string {\n  if (!SUPABASE_URL) {\n    const missing = [\"NEXT_PUBLIC_SUPABASE_URL\"];\n    throw new Error(\n      `Supabase URL is required. Missing env: ${missing.join(\", \")}. Set them in .env.local at project root.`\n    );\n  }\n  return SUPABASE_URL;\n}\n\nexport function getSupabaseKey(): string {\n  if (!SUPABASE_KEY) {\n    const missing = [\n      ...(PUBLISHABLE === undefined && ANON === undefined\n        ? [\"NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY\"]\n        : []),\n      ...(PUBLISHABLE === \"\" && ANON === \"\"\n        ? [\"NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY (empty)\"]\n        : []),\n    ];\n    if (missing.length === 0)\n      missing.push(\"NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n    throw new Error(\n      `Supabase key is required. Missing or empty env: ${missing.join(\", \")}. Set them in .env.local at project root.`\n    );\n  }\n  return SUPABASE_KEY;\n}\n\n/** Development-only: log whether URL/key are set (booleans only). */\nexport function logSupabaseEnvCheck(): void {\n  if (process.env.NODE_ENV !== \"development\") return;\n  // eslint-disable-next-line no-console\n  console.log(\"[Supabase env check]\", {\n    hasUrl: Boolean(SUPABASE_URL),\n    hasKey: Boolean(SUPABASE_KEY),\n  });\n}\n\nconst SERVICE_ROLE = process.env.SUPABASE_SERVICE_ROLE_KEY?.trim();\n\nexport function getSupabaseServiceRoleKey(): string {\n  if (!SERVICE_ROLE) {\n    throw new Error(\n      \"Supabase service role key is required. Missing env: SUPABASE_SERVICE_ROLE_KEY. Set it in .env.local at project root (server-side only).\"\n    );\n  }\n  return SERVICE_ROLE;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;CAGC,GAED,MAAM;AACN,MAAM,cAAc,QAAQ,GAAG,CAAC,oCAAoC;AACpE,MAAM;AAEC,MAAM,eAAe,KAAK,UAAU;AACpC,MAAM,eAAe,CAAC,eAAe,IAAI,GAAG,UAAU;AAEtD,SAAS;IACd,IAAI,CAAC,cAAc;QACjB,MAAM,UAAU;YAAC;SAA2B;QAC5C,MAAM,IAAI,MACR,CAAC,uCAAuC,EAAE,QAAQ,IAAI,CAAC,MAAM,yCAAyC,CAAC;IAE3G;IACA,OAAO;AACT;AAEO,SAAS;IACd,IAAI,CAAC,cAAc;QACjB,MAAM,UAAU;eACV,sCACA,0BACA,EAAE;eACF,sCACA,0BACA,EAAE;SACP;QACD,IAAI,QAAQ,MAAM,KAAK,GACrB,QAAQ,IAAI,CAAC;QACf,MAAM,IAAI,MACR,CAAC,gDAAgD,EAAE,QAAQ,IAAI,CAAC,MAAM,yCAAyC,CAAC;IAEpH;IACA,OAAO;AACT;AAGO,SAAS;IACd;;IACA,sCAAsC;IACtC,QAAQ,GAAG,CAAC,wBAAwB;QAClC,QAAQ,QAAQ;QAChB,QAAQ,QAAQ;IAClB;AACF;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,yBAAyB,EAAE;AAErD,SAAS;IACd,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,MACR;IAEJ;IACA,OAAO;AACT"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\r\nimport { cookies } from \"next/headers\";\r\nimport { getSupabaseUrl, getSupabaseKey, logSupabaseEnvCheck } from \"./env\";\r\n\r\nexport async function createClient() {\r\n  logSupabaseEnvCheck();\r\n  const cookieStore = await cookies();\r\n  return createServerClient(getSupabaseUrl(), getSupabaseKey(), {\r\n    cookies: {\r\n      getAll() {\r\n        return cookieStore.getAll();\r\n      },\r\n      setAll(cookiesToSet) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) =>\r\n            cookieStore.set(name, value, options)\r\n          );\r\n        } catch {\r\n          // Server Component â€“ ignore\r\n        }\r\n      },\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAA,6IAAmB;IACnB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,OAAO,IAAA,+LAAkB,EAAC,IAAA,wIAAc,KAAI,IAAA,wIAAc,KAAI;QAC5D,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,4BAA4B;gBAC9B;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/lib/action-result.ts"],"sourcesContent":["export type ActionResult<T = void> =\n  | { ok: true; data: T }\n  | { ok: false; error: { message: string; code?: string } };\n\nexport function ok<T>(data: T): ActionResult<T> {\n  return { ok: true, data };\n}\n\nexport function fail(message: string, code?: string): ActionResult<never> {\n  return { ok: false, error: { message, code } };\n}\n"],"names":[],"mappings":";;;;;;AAIO,SAAS,GAAM,IAAO;IAC3B,OAAO;QAAE,IAAI;QAAM;IAAK;AAC1B;AAEO,SAAS,KAAK,OAAe,EAAE,IAAa;IACjD,OAAO;QAAE,IAAI;QAAO,OAAO;YAAE;YAAS;QAAK;IAAE;AAC/C"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/app/inbox/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/lib/supabase/server\";\nimport { revalidatePath } from \"next/cache\";\nimport type { ActionResult } from \"@/lib/action-result\";\nimport { ok, fail } from \"@/lib/action-result\";\n\nexport async function deleteCapsule(id: string): Promise<ActionResult> {\n  try {\n    const supabase = await createClient();\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return fail(\"Not signed in\", \"UNAUTHORIZED\");\n    const { error } = await supabase.from(\"messages\").delete().eq(\"id\", id).eq(\"user_id\", user.id);\n    if (error) return fail(error.message, \"DB_ERROR\");\n    revalidatePath(\"/inbox\");\n    return ok(undefined);\n  } catch (e) {\n    return fail(e instanceof Error ? e.message : \"Delete failed\", \"UNKNOWN\");\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;;;;;AAEO,eAAe,cAAc,EAAU;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yIAAY;QACnC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QACtD,IAAI,CAAC,MAAM,OAAO,IAAA,+HAAI,EAAC,iBAAiB;QACxC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,MAAM,IAAI,EAAE,CAAC,WAAW,KAAK,EAAE;QAC7F,IAAI,OAAO,OAAO,IAAA,+HAAI,EAAC,MAAM,OAAO,EAAE;QACtC,IAAA,+IAAc,EAAC;QACf,OAAO,IAAA,6HAAE,EAAC;IACZ,EAAE,OAAO,GAAG;QACV,OAAO,IAAA,+HAAI,EAAC,aAAa,QAAQ,EAAE,OAAO,GAAG,iBAAiB;IAChE;AACF;;;IAZsB;;AAAA,+OAAA"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/Nostalgic%20Message%20to%20the%20future/.next-internal/server/app/inbox/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {deleteCapsule as '40c1938adbeb3277282e6e523f69c769672846e16a'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}