module.exports=[5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(14800),g=c,h=a.i(65802);class i extends g.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=this.props.sizeRef.current;a.height=b.offsetHeight||0,a.width=b.offsetWidth||0,a.top=b.offsetTop,a.left=b.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function j({children:a,isPresent:c}){let d=(0,g.useId)(),e=(0,g.useRef)(null),f=(0,g.useRef)({width:0,height:0,top:0,left:0}),{nonce:j}=(0,g.useContext)(h.MotionConfigContext);return(0,g.useInsertionEffect)(()=>{let{width:a,height:b,top:g,left:h}=f.current;if(c||!e.current||!a||!b)return;e.current.dataset.motionPopId=d;let i=document.createElement("style");return j&&(i.nonce=j),document.head.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            top: ${g}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(i)}},[c]),(0,b.jsx)(i,{isPresent:c,childRef:e,sizeRef:f,children:g.cloneElement(a,{ref:e})})}let k=({children:a,initial:d,isPresent:g,onExitComplete:h,custom:i,presenceAffectsLayout:k,mode:m})=>{let n=(0,e.useConstant)(l),o=(0,c.useId)(),p=(0,c.useCallback)(a=>{for(let b of(n.set(a,!0),n.values()))if(!b)return;h&&h()},[n,h]),q=(0,c.useMemo)(()=>({id:o,initial:d,isPresent:g,custom:i,onExitComplete:p,register:a=>(n.set(a,!1),()=>n.delete(a))}),k?[Math.random(),p]:[g,p]);return(0,c.useMemo)(()=>{n.forEach((a,b)=>n.set(b,!1))},[g]),c.useEffect(()=>{g||n.size||!h||h()},[g]),"popLayout"===m&&(a=(0,b.jsx)(j,{isPresent:g,children:a})),(0,b.jsx)(f.PresenceContext.Provider,{value:q,children:a})};function l(){return new Map}var m=a.i(20410);let n=a=>a.key||"";function o(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}var p=a.i(1703);let q=({children:a,custom:f,initial:g=!0,onExitComplete:h,presenceAffectsLayout:i=!0,mode:j="sync",propagate:l=!1})=>{let[q,r]=(0,m.usePresence)(l),s=(0,c.useMemo)(()=>o(a),[a]),t=l&&!q?[]:s.map(n),u=(0,c.useRef)(!0),v=(0,c.useRef)(s),w=(0,e.useConstant)(()=>new Map),[x,y]=(0,c.useState)(s),[z,A]=(0,c.useState)(s);(0,p.useIsomorphicLayoutEffect)(()=>{u.current=!1,v.current=s;for(let a=0;a<z.length;a++){let b=n(z[a]);t.includes(b)?w.delete(b):!0!==w.get(b)&&w.set(b,!1)}},[z,t.length,t.join("-")]);let B=[];if(s!==x){let a=[...s];for(let b=0;b<z.length;b++){let c=z[b],d=n(c);t.includes(d)||(a.splice(b,0,c),B.push(c))}"wait"===j&&B.length&&(a=B),A(o(a)),y(s);return}let{forceRender:C}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:z.map(a=>{let c=n(a),d=(!l||!!q)&&(s===z||t.includes(c));return(0,b.jsx)(k,{isPresent:d,initial:(!u.current||!!g)&&void 0,custom:d?void 0:f,presenceAffectsLayout:i,mode:j,onExitComplete:d?void 0:()=>{if(!w.has(c))return;w.set(c,!0);let a=!0;w.forEach(b=>{b||(a=!1)}),a&&(null==C||C(),A(v.current),l&&(null==r||r()),h&&h())},children:a},c)})})};a.s(["AnimatePresence",()=>q],62036)},8114,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(5050);let g=(0,f.createServerReference)("40aaf08d577b19564a27451c5a2629a9c0948819fe",f.callServer,void 0,f.findSourceMapURL,"markOpened");var h=a.i(40695);function i({onOpen:a}){return(0,b.jsx)(d.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",initial:{opacity:1},exit:{opacity:0},transition:{duration:.8},children:(0,b.jsxs)(d.motion.div,{className:"max-w-md mx-auto p-8 text-center space-y-6",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[(0,b.jsx)("h1",{className:"text-2xl font-medium text-foreground",children:"A message from your past self has arrived."}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"When you’re ready, open it below."}),(0,b.jsx)(h.Button,{size:"lg",className:"rounded-full px-8",onClick:a,children:"Open"})]})},"overlay")}function j({content:a}){return(0,b.jsx)(d.motion.article,{className:"opening-ceremony-card relative rounded-lg shadow-xl p-8 md:p-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{fontFamily:"Georgia, 'Times New Roman', serif",boxShadow:"0 4px 20px rgba(0,0,0,0.1), inset 0 0 60px rgba(139,90,43,0.05)"},children:(0,b.jsx)("div",{className:"prose max-w-none",children:(0,b.jsx)("p",{className:"opening-ceremony-ink text-lg leading-relaxed whitespace-pre-wrap",children:a})})})}function k({src:a}){let e=(0,c.useRef)(null),[f,g]=(0,c.useState)(!1);return(0,b.jsxs)(d.motion.div,{className:"flex flex-col items-center justify-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,b.jsx)("audio",{ref:e,src:a,onEnded:()=>g(!1)}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a=e.current;a&&(f?a.pause():a.play(),g(!f))},className:"opening-ceremony-wax-button relative w-24 h-24 rounded-full border-4 shadow-lg flex items-center justify-center hover:scale-105 transition-transform focus:outline-none focus:ring-2 focus:ring-[var(--antique-brass)]","aria-label":f?"Pause":"Play",children:f?(0,b.jsxs)("span",{className:"flex gap-0.5",children:[(0,b.jsx)("span",{className:"w-2 h-6 rounded-sm",style:{backgroundColor:"var(--antique-ink)"}}),(0,b.jsx)("span",{className:"w-2 h-6 rounded-sm",style:{backgroundColor:"var(--antique-ink)"}})]}):(0,b.jsx)("span",{className:"w-0 h-0 border-y-[12px] border-y-transparent border-l-[20px] border-l-[var(--antique-ink)] ml-1"})}),(0,b.jsx)("p",{className:"opening-ceremony-ink-secondary mt-4 font-medium",children:f?"Playing…":"Play message"})]})}function l({message:a,signedMediaUrl:f}){let[h,l]=(0,c.useState)("overlay"),[m,n]=(0,c.useState)(!1),o=(0,c.useCallback)(()=>{l("reveal"),setTimeout(()=>{l("content"),m||(n(!0),g(a.id))},1800)},[a.id,m]);return(0,b.jsx)("div",{className:"min-h-screen relative overflow-hidden",children:(0,b.jsxs)(e.AnimatePresence,{mode:"wait",children:["overlay"===h&&(0,b.jsx)(i,{onOpen:o}),("reveal"===h||"content"===h)&&(0,b.jsxs)(d.motion.div,{"data-open-theme":"antique",className:"absolute inset-0 opening-ceremony-bg opening-ceremony-vignette",initial:{opacity:0},animate:{opacity:1},transition:{duration:"reveal"===h?1:.6},children:["reveal"===h&&(0,b.jsx)(d.motion.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8}}),"content"===h&&(0,b.jsx)(d.motion.div,{className:"min-h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,b.jsxs)("div",{className:"max-w-xl mx-auto py-12 px-6",children:["text"===a.type&&a.text_content&&(0,b.jsx)(j,{content:a.text_content}),"audio"===a.type&&f&&(0,b.jsx)(k,{src:f}),"video"===a.type&&f&&(0,b.jsxs)("div",{className:"relative rounded-lg overflow-hidden border-4 border-amber-900/40 shadow-xl",children:[(0,b.jsx)("video",{src:f,controls:!0,className:"w-full aspect-video object-cover",style:{filter:"sepia(0.2) contrast(1.05)"}}),(0,b.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-[url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noise%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noise)%22 opacity=%220.06%22/%3E%3C/svg%3E')] mix-blend-overlay"})]}),a.song_url&&(0,b.jsx)("div",{className:"mt-8 text-center",children:(0,b.jsx)("a",{href:a.song_url,target:"_blank",rel:"noopener noreferrer",className:"opening-ceremony-accent inline-flex items-center rounded-lg border-2 px-4 py-2 no-underline hover:opacity-90",children:a.song_title&&a.song_artist?`Play “${a.song_title}” by ${a.song_artist}`:"Play on Spotify / Apple Music"})})]})},"content")]},"antique-scope")]})})}a.s(["OpenCeremony",()=>l],8114)}];

//# sourceMappingURL=_000e276e._.js.map